(this["webpackJsonp4eddit-boilerplate"]=this["webpackJsonp4eddit-boilerplate"]||[]).push([[0],{125:function(e,t,n){e.exports=n(156)},156:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=n(17),l=n(95),s=n(213),u=n(214),p=n(108),m=n(99),d=n.n(m),h=Object(p.a)({palette:{primary:d.a}}),g=n(21),f=n(66),v=n(13),b=n(31),E=n(32),k=n(35),w=n(36),P=n(198),O=n(199),y=n(10),C=n.n(y),j=n(19),x=n(20),D=n.n(x),S=n(12),L="https://us-central1-future-apis.cloudfunctions.net/fourEddit/",I=function(){return function(){var e=Object(j.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.localStorage.getItem("token"),e.next=4,D.a.get("".concat(L,"posts"),{headers:{auth:n}});case 4:a=e.sent,t(T(a.data.posts)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return{type:"GET_POSTS",payload:{data:e}}},N=function(e){return function(){var t=Object(j.a)(C.a.mark((function t(n){var a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.localStorage.getItem("token"),t.next=4,D.a.get("".concat(L,"posts/").concat(e),{headers:{"Content-Type":"application/json",auth:a}});case 4:r=t.sent,window.localStorage.setItem("id",r.data.post.id),n(V(r.data.post)),n(Object(S.e)(Xe.postDetails=r.data.post.id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return{type:"POST_DETAILS",payload:{data:e}}},_=n(110),U=n(195),q=n(196),R=n(197),z=n(68),B=n(158),F=n(216),M=n(109),X=n(100),G=n.n(X),A=n(75),J=n.n(A),K=n(192),W=n(14),H=Object(K.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(v.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(v.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(W.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(W.b)(e.palette.common.white,.25)},width:"100%",margin:0},e.breakpoints.up("sm"),{width:"40vw",margin:"0 20vw"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(v.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(v.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(v.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),Q=function(e){var t=H(),n=r.a.useState(null),a=Object(_.a)(n,2),o=a[0],i=a[1],c=Boolean(o),l="primary-search-account-menu",s=r.a.createElement(M.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:l,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:function(){i(null)}},r.a.createElement(F.a,{onClick:function(){window.localStorage.clear(),e.goToLoginPage()}},"Logout"));return r.a.createElement("div",{className:t.grow},r.a.createElement(U.a,{position:"static"},r.a.createElement(q.a,null,r.a.createElement(z.a,{className:t.title,variant:"h6",noWrap:!0},"4Eddit"),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(G.a,null)),r.a.createElement(B.a,Object(v.a)({onChange:e.handleChangeInput,placeholder:"Pesquisar\u2026",inputProps:{"aria-label":"pesquisa"},name:"filterPosts",value:e.filterPosts,onKeyUp:e.keyPress,classes:{root:t.inputRoot,input:t.inputInput}},"inputProps",{"aria-label":"search"}))),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",null,null===e.token?r.a.createElement(R.a,{edge:"end","aria-label":"account of current user","aria-controls":l,"aria-haspopup":"true",color:"inherit"},r.a.createElement(J.a,null)):r.a.createElement(R.a,{edge:"end","aria-label":"account of current user","aria-controls":l,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(J.a,null))))),s)},Y=n(45),Z=n(46);function $(){var e=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n\n  @media screen and(width: 450px) {\n    width: 100vw;\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(Y.a)(["\n  width: 20vw;\n  height: 100vh;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n\n  @media screen and (max-width: 450px) {\n    width: 90%;\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(Y.a)(["\n  width: 45vw;\n  display: flex;\n  margin: auto;\n  flex-direction: column;\n  \n  @media screen and (max-width: 450px) {\n    width: 100%;\n  }\n"]);return te=function(){return e},e}function ne(){var e=Object(Y.a)(["\n  width: 45vw;\n  margin: auto;\n  display: grid;\n  gap: 10px;\n\n  @media screen and (max-width: 710px) {\n    width: 100%;\n  }\n;\n"]);return ne=function(){return e},e}var ae=Z.a.div(ne()),re=Z.a.form(te()),oe=Z.a.div(ee()),ie=Z.a.form($()),ce=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.handleSubmitLogin=function(e){var t=a.state,n=t.user,r=t.password;e.preventDefault(),a.props.submitLogin(n,r)},a.state={user:"",password:""},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){null!==window.localStorage.getItem("token")&&this.props.goToUserPage()}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.password;return r.a.createElement("div",null,r.a.createElement(Q,{token:null}),r.a.createElement(oe,null,r.a.createElement(ie,{onSubmit:this.handleSubmitLogin},r.a.createElement(P.a,{name:"user",type:"email",value:t,onChange:this.handleChangeInput,placeholder:"Digite seu nome de usu\xe1rio.",required:!0}),r.a.createElement(P.a,{name:"password",type:"password",value:n,onChange:this.handleChangeInput,placeholder:"Digite sua senha.",required:!0}),r.a.createElement(O.a,{color:"primary",type:"submit"},"Entrar")),r.a.createElement(O.a,{onClick:this.props.goToSingUpPage},"Cadastrar")))}}]),n}(a.Component),le=Object(c.c)(null,(function(e){return{submitLogin:function(t,n){return e(function(e,t){return function(){var n=Object(j.a)(C.a.mark((function n(a){var r,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={email:e,password:t},n.prev=1,n.next=4,D.a.post("".concat(L,"login"),r,{headers:{"Content-Type":"application/json"}});case 4:o=n.sent,window.localStorage.setItem("token",o.data.token),a(Object(S.e)(Xe.userPage)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),alert("Ops! Nome de usu\xe1rio ou senha est\xe3o errados."),console.error(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},goToSingUpPage:function(){return e(Object(S.e)(Xe.singUpPage))},goToUserPage:function(){return e(Object(S.e)(Xe.userPage))}}}))(ce),se=n(201),ue=n(200),pe=n(202),me=n(217),de=n(203),he=n(104),ge=n.n(he),fe=n(64),ve=n.n(fe),be=n(65),Ee=n.n(be),ke=n(204),we=n(206),Pe=n(208),Oe=n(210),ye=n(205),Ce=n(207),je=n(209),xe=n(211);function De(){var e=Object(Y.a)(["\n    cursor: pointer;\n"]);return De=function(){return e},e}var Se=Object(Z.a)(ue.a)(De()),Le=function(e){return r.a.createElement(se.a,null,r.a.createElement(Se,{avatar:r.a.createElement(me.a,null,e.avatar),title:e.title,subheader:e.name,onClick:e.postDetail}),r.a.createElement(pe.a,null,r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},e.text)),r.a.createElement(de.a,null,r.a.createElement(R.a,{onClick:function(){return e.handleDeslikePost(-1,e.id)}},r.a.createElement(ve.a,{color:e.userVoteDirection>=0?"":"secondary"})),r.a.createElement("p",null,e.votesCount),r.a.createElement(R.a,{onClick:function(){return e.handleLikePost(1,e.id)}},r.a.createElement(Ee.a,{color:e.userVoteDirection<=0?"":"primary"})),!1!==e.showCommentIcon&&r.a.createElement(R.a,{onClick:e.postDetail},r.a.createElement(ge.a,null)),r.a.createElement(ke.a,{url:e.url,title:e.title},r.a.createElement(ye.a,{size:28,round:!0})),r.a.createElement(we.a,{url:e.url,title:e.title},r.a.createElement(Ce.a,{size:28,round:!0})),r.a.createElement(Pe.a,{url:e.url,title:e.title},r.a.createElement(je.a,{size:28,round:!0})),r.a.createElement(Oe.a,{url:e.url,title:e.title},r.a.createElement(xe.a,{size:28,round:!0}))))},Ie=function(e,t,n){return function(){var a=Object(j.a)(C.a.mark((function a(r){var o;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o=window.localStorage.getItem("token"),a.next=4,D.a.put("".concat(L,"posts/").concat(t,"/vote"),{direction:e},{headers:{"Content-Type":" application/json",auth:o}});case 4:a.sent,r("userPage"===n?I():N(t)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},Te=n(212),Ne=n(215),Ve=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.handleEnter=function(e){13===e.keyCode&&a.handleFilterPost()},a.handleNewPost=function(e){var t=a.state,n=t.title,r=t.text;e.preventDefault(),a.props.createNewPost(n,r),a.setState({title:"",text:"",filterPosts:""})},a.handlePostDetail=function(e){a.props.getPostDetails(e)},a.handleLikePost=function(e,t){if(1===a.props.postList.find((function(e){return e.id==t})).userVoteDirection){a.props.likeDeslikePost(0,t,"userPage")}else{a.props.likeDeslikePost(e,t,"userPage")}},a.handleDeslikePost=function(e,t){if(-1===a.props.postList.find((function(e){return e.id==t})).userVoteDirection){a.props.likeDeslikePost(0,t,"userPage")}else{a.props.likeDeslikePost(e,t,"userPage")}},a.handleFilterPost=function(){var e=a.state.filterPosts,t=void 0===e?a.props.postList:e,n=a.props.postList.filter((function(e){return e.text.toLowerCase().indexOf(t.toLowerCase())>-1}));a.setState({allpostsFilter:n})},a.state={title:"",text:"",filterPosts:"",allpostsFilter:void 0,token:window.localStorage.getItem("token")},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){null===this.state.token&&this.props.goToLoginPage(),this.props.getPosts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.text,o=t.filterPosts,i=t.allpostsFilter,c=void 0===i?this.props.postList:i;return r.a.createElement("div",null,r.a.createElement(Q,{goToLoginPage:this.props.goToLoginPage,filterPosts:o,handleChangeInput:this.handleChangeInput,keyPress:this.handleEnter,token:this.state.token}),r.a.createElement(re,{onSubmit:this.handleNewPost},r.a.createElement(Ne.a,{value:n,onChange:this.handleChangeInput,multiline:!0,label:"T\xedtulo do post",name:"title",required:!0}),r.a.createElement(Ne.a,{value:a,onChange:this.handleChangeInput,multiline:!0,label:"Texto do post",name:"text",required:!0}),r.a.createElement(O.a,{type:"submit",color:"primary"},"Publicar")),r.a.createElement(ae,null,0===this.props.postList.length?r.a.createElement(Te.a,null):c.map((function(t){return r.a.createElement(Le,{key:t.id,avatar:t.username.substr(0,1),title:t.title,text:t.text,postDetail:function(){return e.handlePostDetail(t.id)},handleLikePost:e.handleLikePost,handleDeslikePost:e.handleDeslikePost,id:t.id,votesCount:t.votesCount,userVoteDirection:t.userVoteDirection,name:t.username,url:"http://".concat(window.location.hostname,"/").concat(t.id)})}))))}}]),n}(r.a.Component),_e=Object(c.c)((function(e){return{postList:e.postList.posts}}),(function(e){return{goToLoginPage:function(){return e(Object(S.e)(Xe.loginPage))},createNewPost:function(t,n){return e(function(e,t){return function(){var n=Object(j.a)(C.a.mark((function n(a){var r,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={title:e,text:t},n.prev=1,o=window.localStorage.getItem("token"),n.next=5,D.a.post("".concat(L,"posts"),r,{headers:{auth:o}});case 5:n.sent,a(I()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getPosts:function(){return e(I())},getPostDetails:function(t){return e(N(t))},likeDeslikePost:function(t,n,a){return e(Ie(t,n,a))}}}))(Ve),Ue=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.state={userName:"",email:"",password:""},a}return Object(E.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.userName,a=t.email,o=t.password;return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement(oe,null,r.a.createElement(ie,{onSubmit:function(t){t.preventDefault(),e.props.submitSingUp(n,a,o)}},r.a.createElement(P.a,{name:"userName",type:"text",value:n,onChange:this.handleChangeInput,placeholder:"Digite seu nome de usu\xe1rio.",required:!0}),r.a.createElement(P.a,{name:"email",type:"email",value:a,onChange:this.handleChangeInput,placeholder:"Digite seu email.",required:!0}),r.a.createElement(P.a,{name:"password",type:"password",value:o,onChange:this.handleChangeInput,placeholder:"Digite sua senha.",required:!0}),r.a.createElement(O.a,{color:"primary",type:"submit"},"Cadastrar")),r.a.createElement(O.a,{color:"secondary",onClick:this.props.goBack},"Voltar")))}}]),n}(a.Component),qe=Object(c.c)(null,(function(e){return{submitSingUp:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(j.a)(C.a.mark((function a(r){var o,i;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={email:t,password:n,username:e},a.prev=1,a.next=4,D.a.post("".concat(L,"signup"),o);case 4:i=a.sent,window.localStorage.setItem("token",i.data.token),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},goBack:function(){return e(Object(S.c)())}}}))(Ue),Re=function(e){return r.a.createElement(se.a,null,r.a.createElement(ue.a,{title:e.title}),r.a.createElement(pe.a,null,r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},e.text)),r.a.createElement(de.a,null,r.a.createElement(R.a,{onClick:function(){return e.handleLikeDeslikeComment(-1,e.id)}},r.a.createElement(ve.a,{color:e.userVoteDirection>=0?"":"secondary"})),r.a.createElement("p",null,e.votesCount),r.a.createElement(R.a,{onClick:function(){return e.handleLikeDeslikeComment(1,e.id)}},r.a.createElement(Ee.a,{color:e.userVoteDirection<=0?"":"primary"}))))},ze=n(106),Be=n.n(ze),Fe=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleChangeInput=function(e){a.setState({comment:e.target.value})},a.submitComment=function(e){a.props.createNewComment(a.state.comment,e),a.setState({comment:""})},a.handleLikeDeslikePost=function(e,t){a.props.likeDeslikePost(e,t)},a.handleLikeDeslikeComment=function(e,t){a.props.likeDeslikeComment(e,t)},a.state={comment:""},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("id"),t=window.localStorage.getItem("token");this.props.getPostDetails(e),null===t&&this.props.goToLoginPage()}},{key:"render",value:function(){var e=this,t=this.props.postDetail,n=t.username,a=t.text,o=t.title,i=t.comments,c=t.id,l=t.userVoteDirection,s=t.votesCount;return r.a.createElement("div",null,r.a.createElement(Q,{goToLoginPage:this.props.goToLoginPage}),r.a.createElement(ae,null,r.a.createElement(Le,{title:o,text:a,handleLikeDeslikePost:this.handleLikeDeslikePost,id:c,userVoteDirection:l,votesCount:s,avatar:n&&n.substr(0,1),name:n,showCommentIcon:!1,url:window.location.href}),r.a.createElement(re,{onSubmit:function(t){t.preventDefault(),e.submitComment(c)}},r.a.createElement(P.a,{name:"comment",type:"text",multiline:!0,value:this.state.comment,onChange:this.handleChangeInput,placeholder:"Digite um coment\xe1rio",required:!0}),r.a.createElement(O.a,{type:"submit",color:"primary"},"Publicar")),r.a.createElement(O.a,{color:"secondary",onClick:this.props.goToUserPage},r.a.createElement(Be.a,null),"Voltar")),r.a.createElement(ae,null,r.a.createElement("h2",null,"Coment\xe1rios"),void 0===i?r.a.createElement(Te.a,null):i.map((function(t){return r.a.createElement(Re,{key:t.id,title:t.username,text:t.text,handleLikeDeslikeComment:e.handleLikeDeslikeComment,id:t.id,userVoteDirection:t.userVoteDirection,votesCount:t.votesCount})}))))}}]),n}(a.Component),Me=Object(c.c)((function(e){return{postDetail:e.postList.postDetail}}),(function(e){return{goToLoginPage:function(){return e(Object(S.e)(Xe.loginPage))},goToUserPage:function(){return e(Object(S.e)(Xe.userPage))},createNewComment:function(t,n){return e(function(e,t){return function(){var n=Object(j.a)(C.a.mark((function n(a){var r,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.localStorage.getItem("id"),o=window.localStorage.getItem("token"),n.next=5,D.a.post("".concat(L,"posts/").concat(t,"/comment"),{text:e},{headers:{"Type-Content":"application/json",auth:o}});case 5:a(N(r)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getPostDetails:function(t){return e(N(t))},likeDeslikePost:function(t,n){return e(Ie(t,n))},likeDeslikeComment:function(t,n,a){return e(function(e,t){return function(){var n=Object(j.a)(C.a.mark((function n(a){var r,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.localStorage.getItem("token"),o=window.localStorage.getItem("id"),n.next=5,D.a.put("".concat(L,"posts/").concat(o,"/comment/").concat(t,"/vote"),{direction:e},{headers:{"Content-Type":" application/json",auth:r}});case 5:n.sent,a(N(o)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(Fe),Xe={loginPage:"/",singUpPage:"/singUpPage",userPage:"/userPage",postDetails:""};var Ge,Ae=function(e){return r.a.createElement(g.a,{history:e.history},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:Xe.loginPage,component:le}),r.a.createElement(f.a,{exact:!0,path:Xe.singUpPage,component:qe}),r.a.createElement(f.a,{exact:!0,path:Xe.userPage,component:_e}),r.a.createElement(f.a,{exact:!0,path:Xe.postDetails,component:Me})))},Je=n(28),Ke=n(38),We=n(78),He={posts:[],postDetail:{}},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSTS":return Object(We.a)({},e,{posts:t.payload.data});case"POST_DETAILS":return Object(We.a)({},e,{postDetail:t.payload.data});default:return e}},Ye=n(93),Ze=Object(Je.a)(),$e=[Object(Ke.a)(Object(Ye.a)(Ze),l.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}],et=Object(Ke.e)((Ge=Ze,Object(Ke.c)({router:Object(g.b)(Ge),postList:Qe})),Ke.d.apply(void 0,$e)),tt=function(){return r.a.createElement(c.a,{store:et},r.a.createElement(s.a,{theme:h},r.a.createElement(u.a,null),r.a.createElement(Ae,{history:Ze})))},nt=document.getElementById("root");i.a.render(r.a.createElement(tt,null),nt)}},[[125,1,2]]]);
//# sourceMappingURL=main.9f59f496.chunk.js.map